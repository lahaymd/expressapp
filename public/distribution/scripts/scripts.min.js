"use strict";!function(){angular.module("myApp",["ui.router","ngAnimate","ngMessages","ngMaterial"]).config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("teal").warnPalette("red").backgroundPalette("grey")}])}(),function(){function e(e,t,o){t.otherwise("/"),o.html5Mode(!0),e.state("login",{url:"/",templateUrl:"/partials/login",controllerAs:"vm"}).state("users",{url:"/users",templateUrl:"/partials/users",controller:"UserController"}).state("users.detail",{url:"/:id",templateUrl:"/partials/selecteduser",controller:"UserController"}).state("register",{url:"/register",templateUrl:"/partials/register",controller:"RegisterController",controllerAs:"vm"}).state("api",{url:"/api/user",templateUrl:"/partials/users",controller:"UserController"}).state("directive",{url:"/directive",templateUrl:"/partials/directive",controller:"ExampleController"}).state("readerboard",{url:"/readerboard",templateUrl:"/partials/readerboard",controller:"ReaderboardController",controllerAs:"vm"})}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("myApp").config(e)}(),angular.module("myApp").factory("AuthService",["$q","$timeout","$http",function(e,t,o){function r(t){var r=e.defer();return o.put("/api/users/"+t._id,t).success(function(e){console.log(e),r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}function n(t){var r=e.defer();return o["delete"]("api/users/"+t).success(function(e){r.resolve(e)}).error(function(e){r.reject(e+"!!")}),r.promise}function s(t){var r=e.defer();return o.get("/api/users/"+t).success(function(e){r.resolve(e)}).error(function(e){r.reject(e+"!")}),r.promise}function l(){var t=e.defer();return o.get("/api/users").success(function(e){t.resolve(e)}).error(function(e){t.reject(e+"!")}),t.promise}function i(){return!!d}function c(){return o.get("/user/status").success(function(e){d=!!e.status}).error(function(e){d=!1})}function u(t,r){var n=e.defer();return o.post("/user/login",{username:t,password:r}).success(function(e,t){200===t&&e.status?(d=!0,n.resolve()):(d=!1,n.reject())}).error(function(e){d=!1,n.reject()}),n.promise}function a(){var t=e.defer();return o.get("/user/logout").success(function(e){d=!1,t.resolve()}).error(function(e){d=!1,t.reject()}),t.promise}function f(t,r){var n=e.defer();return o.post("/api/users",{username:t,password:r}).success(function(e){n.resolve(e)}).error(function(e){defer.reject(e)}),n.promise}var d=null,g={isLoggedIn:i,getUserStatus:c,login:u,logout:a,register:f,getUsers:l,find:s,remove:n,update:r};return g}]),angular.module("myApp").controller("ExampleController",["$scope","$mdToast",function(e,t){e.date=new Date,e.ctrlName="foo",e.ctrlFlavor="cherry",e.isDisabled=!0,e.saySomething=function(){alert("say something!")},e.someMethod=function(e){alert(e)},e.showToast=function(){t.show({hideDelay:5e3,position:"top right",parent:angular.element(document.querySelector("#toastContainer")),template:'<md-toast><span class="md-toast-text" flex>Custom toast!</span><md-button class="md-highlight" ng-click="openMoreInfo($event)">More info</md-button><md-button ng-click="closeToast()">Close</md-button></md-toast>'})}}]),angular.module("myApp").directive("example",function(){return{scope:{name:"=",someMeth:"&",dial:"&",flavor:"@"},restrict:"AE",templateUrl:"/partials/example-directive",link:function(e,t,o,r){}}}),function(){angular.module("myApp").controller("NavController",["$mdSidenav","$location",function(e,t){var o=this;o.currentNavItem=t.path().slice(1)||"login",console.log(o.currentNavItem),o.open=function(){e("left").toggle()}}]).controller("ModalController",["$mdDialog",function(e){var t=this;t.showAlert=function(t){e.show(e.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("This is an alert title").textContent("You can specify some description text in here.").ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(t))}}])}(),function(){angular.module("myApp").controller("ReaderboardController",["$document","$log",function(e,t){var o=this;o.clear=function(){return e.find("textarea").val("")},o.areaOne=function(){o.letters=document.getElementById("one").value.replace(/\s+/g,"").split("").sort().map(function(e){return e.toLowerCase().match(/\S/g)}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){var o=e[0].indexOf(t);return-1===o?(e[0].push(t),e[1].push(1)):e[1][o]+=1,e},[[],[]]).reduce(function(e,t,o,r){var n=[];return e.forEach(function(e,t){n.push([e,r[1][t]])}),n}),console.log("letters",o.letters),o.lettersTwo=document.getElementById("two").value.replace(/\s+/g,"").split("").sort().map(function(e){return e.toLowerCase().match(/\S/g)}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){var o=e[0].indexOf(t);return-1===o?(e[0].push(t),e[1].push(1)):e[1][o]+=1,e},[[],[]]).reduce(function(e,t,o,r){var n=[];return e.forEach(function(e,t){n.push([e,r[1][t]])}),n}),console.log("lettersTwo",o.lettersTwo);var e=o.letters.filter(function(e,t,o){return foo=this.map(function(e){return e[0]}),console.log("foo",foo),console.log(foo.indexOf(e[0])),foo.indexOf(e[0])>=0||e},o.lettersTwo);console.log("test: ",e);var t=o.lettersTwo.filter(function(e,t,o){return bar=this.map(function(e){return e[0]}),bar.indexOf(e[0])>=0||e},o.letters);console.log("test2: ",t),o.letterDifference=t.map(function(e,t,o){console.log(e[1]),console.log(this.length),console.log(this.length>0&&void 0!==this[t]&&-1!==this[t].indexOf(e[0])?this[t][1]:0);var r={};return(this.length>0&&void 0!==this[t]&&-1!==this[t].indexOf(e[0])?this[t][1]:0)?r[e[0]]=e[1]-(this.length>0&&void 0!==this[t]&&-1!==this[t].indexOf(e[0])?this[t][1]:0):r[e[0]]=e[1],console.log(r),r},e)}}])}(),function(){angular.module("myApp").controller("RegisterController",["$location","AuthService",function(e,t){var o=this;o.registerForm={},o.register=function(){t.register(o.registerForm.username,o.registerForm.password).then(function(){o.registerForm={},e.path("/users")})["catch"](function(e){alert(e)})}}])}(),function(){angular.module("myApp").controller("ShowUserController",["$scope","$stateParams","AuthService",function(e,t,o){e.selectedUser={};var r=function(){o.find(t.id).then(function(t){e.selectedUser=t,console.log(t,"!!!")},function(e){console.log(e)})};r();var n=function(){o.getUsers().then(function(t){e.userlist=t},function(e){console.log(e)})};e.updateUser=function(){console.log(e.selectedUser),o.update(e.selectedUser).then(function(){console.log("updated from controller"),n()},function(e){console.log("you fucked up"),console.log(e.message)})}}])}(),function(){angular.module("myApp").controller("UserController",["$scope","$stateParams","AuthService","$location","$window",function(e,t,o,r,n){e.userlist={};var s=function(){o.getUsers().then(function(t){e.userlist=t,console.log(t)},function(e){console.log(e)})};s(),e.removeUser=function(t){console.log(t),e.isLoading=!0,o.remove(t).then(function(o){console.log(o),console.log(e.userlist),console.log(t);var r=e.userlist.findIndex(function(e){return e._id==t});e.userlist.splice(r,1),console.log("promise returned"),e.isLoading=!1})},e.test="testing link function",e.selectedUser={};var l=function(){o.find(t.id).then(function(t){e.selectedUser=t,console.log(t,"!!")},function(e){console.log(e)})};l(),e.updateUser=function(){console.log(e.selectedUser),o.update(e.selectedUser).then(function(t){var o=e.userlist.findIndex(function(t){return t._id==e.selectedUser._id});console.log(o),console.log(t),console.log("updated from controller"),n.location.reload(),r.path("/users")},function(e){console.log("you fucked up"),console.log(e.message)})},e.register=function(){e.isLoading=!0,o.register(e.userlist.username,e.userlist.password).then(function(t){console.log(t),e.userlist.push(t),angular.element(document.querySelectorAll("input")).val(""),e.isLoading=!1})["catch"](function(e){alert(e)})}}])}(),function(){angular.module("myApp").directive("myDirective",function(){return{restrict:"E",transclude:!0,template:"<div>I am <span ng-transclude></span> directive {{test}}   {{userlist[0].username}}</div>",link:function(e,t,o){t.addClass("foo"),console.log(parseInt(o.bar)+6)}}})}();